!function(e,t){"use strict";function a(e){e.widget("weather",{title:"Weather",description:"Display the current temperature of a city",templateUrl:"{widgetsPath}/weather/src/view.html",controller:"weatherController",controllerAs:"vm",reload:!0,resolve:{data:["weatherService","config",function(e,t){if(t.location)return e.get(t.location)}]},edit:{templateUrl:"{widgetsPath}/weather/src/edit.html"}})}function r(e,t,a,r,i){function n(e){var r=a.trustAsResourceUrl(e);return t.jsonp(r,{jsonpCallbackParam:"callback"})}function o(e){var a=e+"&callback=JSON_CALLBACK";return t.jsonp(a)}function l(t){var a=e.defer(),n=r+t+"&appid="+i;return c(n,{jsonpCallbackParam:"callback"}).then(function(e){return e.data}).then(function(e){e&&200===e.cod?a.resolve(e):a.reject("weather service returned invalid body")}).catch(function(e){a.reject("weather service returned "+e.status)}),a.promise}var c;return c=1===angular.version.major&&angular.version.minor>=6?n:o,{get:l}}function i(e){this.data=e}a.$inject=["dashboardProvider"],r.$inject=["$q","$http","$sce","weatherServiceUrl","weatherApiKey"],i.$inject=["data"],angular.module("adf.widget.weather",["adf.provider"]).value("weatherApiKey","2decdac859755da9d25281b20f0dc7a1").value("weatherServiceUrl","http://api.openweathermap.org/data/2.5/weather?units=metric&q=").config(a),angular.module("adf.widget.weather").run(["$templateCache",function(e){e.put("{widgetsPath}/weather/src/edit.html",'<form role=form><div class=form-group><label for=location>Location</label> <input type=location class=form-control id=location ng-model=config.location placeholder="Enter location"></div></form>'),e.put("{widgetsPath}/weather/src/view.html",'<div class=text-center><div class="alert alert-info" ng-if=!vm.data>Please insert a location in the widget configuration</div><div class=weather ng-if=vm.data><h4>{{vm.data.name}} ({{vm.data.sys.country}})</h4><dl><dt>Temperature:</dt><dd>{{vm.data.main.temp | number:2}}</dd></dl></div></div>')}]),angular.module("adf.widget.weather").service("weatherService",r),angular.module("adf.widget.weather").controller("weatherController",i)}(window);